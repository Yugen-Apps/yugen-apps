name: Build and Deploy UWP

on:
  push:
    branches:
      - release/*
  workflow_dispatch:

jobs:
  build:
    uses: "./.github/workflows/build.yml"
    secrets: inherit
    with:
      solution_name: "Yugen.App.sln"
      project_name: "Yugen.Uwp"

  deploy:
    uses: "./.github/workflows/deploy.yml"
    secrets: inherit
    needs: [build]
    with:
      store_app_id: 9NBLGGH10ZKJ
      major_minor_patch: ${{needs.build.outputs.major_minor_patch}}

  deploy_new:
    uses: "./.github/workflows/deploy-new.yml"
    secrets: inherit
    needs: [build]
    with:
      store_app_id: 9NBLGGH10ZKJ
      major_minor_patch: ${{needs.build.outputs.major_minor_patch}}

  deploy_new2:
    uses: "./.github/workflows/deploy-new2.yml"
    secrets: inherit
    needs: [build]
    with:
      store_app_id: 9NBLGGH10ZKJ
      major_minor_patch: ${{needs.build.outputs.major_minor_patch}}
